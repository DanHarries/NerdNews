@model List<CommentsViewModel>
<!-- Comments -->
@if (Model.Count != 0)
{
    var i = 0;
    @foreach (var comment in Model)
    {
        <hr />
        <div class="comments">
            <div class="media">
                <blockquote class="blockquote card-header p- w-100">

                    @if (User.Identity.IsAuthenticated && User.Identity.Name == comment.Author)
                    {

                        <button type="button" 
                                id="edit-post-@(i + 1)" 
                                class="btn btn-link edit-text float-right text-muted mr-4 mt-2">Edit
                    </button>
                    }

                    <p class="mb-1 font-weight-light comment-font">
                        <i class="fas fa-quote-left"></i>
                        &nbsp;&nbsp; @comment.Message
                    </p>
                    <span class="font-weight-bold">
                        <i class="far fa-user"></i>
                        &nbsp;&nbsp; @comment.Author
                    </span> <footer>
                        <span class="font-small text-monospace text-muted">
                            <i class="far fa-clock"></i>
                            &nbsp;&nbsp;@comment.CommentDateTime
                        </span>
                        <br />
                    </footer>
                </blockquote>


            </div>

            <script>
                $(function () {
                    $('#edit-post-@(i + 1)').click(function () {
                        $('.edit-comment-input-@(i + 1)').toggle();
                    });

                    $('#edit-post-form-btn-@(i + 1)').click(function () {
                        var newEditPost = $('#post-to-edit-@(i + 1)').val();
                        var postIndex = @(i + 1);
                        var postId = '@comment.PostId';
                        console.log(newEditPost, postIndex, postId);
                        $.post("Home/EditPost",
                            {
                                newEditPost: newEditPost,
                                postIndex: postIndex,
                                postId: postId
                            });

                    });                    

                });
            </script>

            <!-- Edit Comment -->
            <div class="hide edit-comment edit-comment-input-@(i + 1) card-footer">

                <div id="edit-post-form" class="form-group">
                    
                    <label>Edit Comment</label>
                    <textarea id="post-to-edit-@(i + 1)" style="resize:none"
                              class="form-control"
                              placeholder="Type comment in here"
                              rows="3">@comment.Message</textarea>
                    <button id="edit-post-form-btn-@(i + 1)" class="btn btn-secondary float-right mt-2" type="submit">Save</button>
                </div>

            </div>
        </div>
        i++;
    }
}
else
{

<div>No comments here, check back later!</div>
}


